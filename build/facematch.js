(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{805:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},806:function(e,t,n){"use strict";var a=n(38),o=n(39),r=n(805);e.exports=function(){function e(e,t,n,a,i,s){s!==r&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=a,n.PropTypes=n,n}},807:function(e,t,n){e.exports=n(806)()},808:function(e,t,n){var a;a=function(e,t){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(1),i=c(r),s=c(n(0));function c(e){return e&&e.__esModule?e:{default:e}}var u=s.default.oneOfType([s.default.string,s.default.arrayOf(s.default.string),s.default.shape({exact:s.default.oneOfType([s.default.string,s.default.arrayOf(s.default.string)])}),s.default.shape({ideal:s.default.oneOfType([s.default.string,s.default.arrayOf(s.default.string)])})]),l=s.default.oneOfType([s.default.shape({exact:s.default.bool}),s.default.shape({ideal:s.default.bool})]),d=s.default.oneOfType([s.default.number,s.default.shape({exact:s.default.number,ideal:s.default.number,min:s.default.number,max:s.default.number})]),f=d,p=s.default.shape({deviceId:u,groupId:u,autoGainControl:l,channelCount:d,latency:f,noiseSuppression:l,sampleRate:d,sampleSize:d,volume:f}),h=s.default.shape({deviceId:u,groupId:u,aspectRatio:f,facingMode:u,frameRate:f,height:d,width:d}),m=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={hasUserMedia:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"componentDidMount",value:function(){(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)&&(t.mountedInstances.push(this),this.state.hasUserMedia||t.userMediaRequested||this.requestUserMedia())}},{key:"componentWillUpdate",value:function(e){JSON.stringify(e.audioConstraints)===JSON.stringify(this.props.audioConstraints)&&JSON.stringify(e.videoConstraints)===JSON.stringify(this.props.videoConstraints)||this.requestUserMedia()}},{key:"componentWillUnmount",value:function(){var e=t.mountedInstances.indexOf(this);t.mountedInstances.splice(e,1),t.userMediaRequested=!1,0===t.mountedInstances.length&&this.state.hasUserMedia&&(this.stream.getVideoTracks&&this.stream.getAudioTracks?(this.stream.getVideoTracks().map(function(e){return e.stop()}),this.stream.getAudioTracks().map(function(e){return e.stop()})):this.stream.stop(),window.URL.revokeObjectURL(this.state.src))}},{key:"getScreenshot",value:function(){if(!this.state.hasUserMedia)return null;var e=this.getCanvas();return e&&e.toDataURL(this.props.screenshotFormat,this.props.screenshotQuality)}},{key:"getCanvas",value:function(){if(!this.state.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var e=document.createElement("canvas"),t=this.video.videoWidth/this.video.videoHeight,n=this.props.screenshotWidth||this.video.clientWidth;e.width=n,e.height=n/t,this.canvas=e,this.ctx=e.getContext("2d")}var a=this.ctx,o=this.canvas;return a.drawImage(this.video,0,0,o.width,o.height),o}},{key:"requestUserMedia",value:function(){var e=this;navigator.getUserMedia=navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var n=function(n,a){var o={video:a||!0};e.props.audio&&(o.audio=n||!0),navigator.mediaDevices.getUserMedia(o).then(function(e){t.mountedInstances.forEach(function(t){return t.handleUserMedia(null,e)})}).catch(function(e){t.mountedInstances.forEach(function(t){return t.handleUserMedia(e)})})};if("mediaDevices"in navigator)n(this.props.audioConstraints,this.props.videoConstraints);else{var o=function(e){return{optional:[{sourceId:e}]}},r=function(e){var t=(e||{}).deviceId;return"string"==typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===(void 0===t?"undefined":a(t))&&t.ideal?t.ideal:null};MediaStreamTrack.getSources(function(t){var a=null,i=null;t.forEach(function(e){"audio"===e.kind?a=e.id:"video"===e.kind&&(i=e.id)});var s=r(e.props.audioConstraints);s&&(a=s);var c=r(e.props.videoConstraints);c&&(i=c),n(o(a),o(i))})}t.userMediaRequested=!0}},{key:"handleUserMedia",value:function(e,t){if(e)return this.setState({hasUserMedia:!1}),void this.props.onUserMediaError(e);this.stream=t;try{this.video.srcObject=t,this.setState({hasUserMedia:!0})}catch(e){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}this.props.onUserMedia()}},{key:"render",value:function(){var e=this;return i.default.createElement("video",{autoPlay:!0,width:this.props.width,height:this.props.height,src:this.state.src,muted:this.props.audio,className:this.props.className,playsInline:!0,style:this.props.style,ref:function(t){e.video=t}})}}]),t}();m.defaultProps={audio:!0,className:"",height:480,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",width:640,screenshotQuality:.92},m.propTypes={audio:s.default.bool,onUserMedia:s.default.func,onUserMediaError:s.default.func,height:s.default.oneOfType([s.default.number,s.default.string]),width:s.default.oneOfType([s.default.number,s.default.string]),screenshotFormat:s.default.oneOf(["image/webp","image/png","image/jpeg"]),style:s.default.object,className:s.default.string,screenshotQuality:s.default.number,screenshotWidth:s.default.number,audioConstraints:p,videoConstraints:h},m.mountedInstances=[],m.userMediaRequested=!1,t.default=m,e.exports=t.default}])},e.exports=a(n(807),n(0))},809:function(e,t,n){var a=n(83),o=n(82),r="[object Number]";e.exports=function(e){return"number"==typeof e||o(e)&&a(e)==r}},889:function(e,t,n){"use strict";n.r(t);n(785);var a=n(212),o=n.n(a),r=(n(782),n(887)),i=n.n(r),s=(n(780),n(888)),c=n.n(s),u=(n(786),n(837)),l=n.n(u),d=(n(775),n(895)),f=n.n(d),p=n(809),h=n.n(p),m=n(10),g=n(213),y=n(0),v=n.n(y),b=n(808),x=n.n(b),O=n(49);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var M,E,U,k,R,S,C,_,j=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},T=(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}M(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),P=function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"==typeof Reflect?"undefined":w(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},I=O.a.img(E||(E=j(["\n  width: 480px;\n  height: 360px;\n  background-color: lightgray;\n  margin-bottom: 1px;\n  margin-left: 1px;\n"],["\n  width: 480px;\n  height: 360px;\n  background-color: lightgray;\n  margin-bottom: 1px;\n  margin-left: 1px;\n"]))),D=O.a.div(U||(U=j(["\n  position: absolute;\n  top: 1px;\n  left: 2px;\n"],["\n  position: absolute;\n  top: 1px;\n  left: 2px;\n"]))),N=O.a.div(k||(k=j(["\n  position: absolute;\n  border: 2px solid blue;\n"],["\n  position: absolute;\n  border: 2px solid blue;\n"]))),q=O.a.div(R||(R=j(["\n  font-size: 72px;\n  line-height: 72px;\n  display: block;\n"],["\n  font-size: 72px;\n  line-height: 72px;\n  display: block;\n"]))),F=O.a.div(S||(S=j(["\n  margin-bottom: 1em;\n"],["\n  margin-bottom: 1em;\n"]))),L=O.a.div(C||(C=j(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 480px;\n  height: 360px;\n  margin: 0 0 0 auto;\n  background-color: white;\n  text-align: center;\n"],["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 480px;\n  height: 360px;\n  margin: 0 0 0 auto;\n  background-color: white;\n  text-align: center;\n"]))),G=O.a.div(_||(_=j(["\n  video {\n    display: block;\n    background-color: lightgray;\n    margin: 0 0 1px auto;\n  }\n"],["\n  video {\n    display: block;\n    background-color: lightgray;\n    margin: 0 0 1px auto;\n  }\n"]))),W=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.capture=function(e){return function(){var n=t.webcam.getScreenshot();Object(m.l)(function(){1===e?t.props.faceCognitionStore.photo1={data:n,faceId:""}:t.props.faceCognitionStore.photo2={data:n,faceId:""}})}},t.getMatchConfidence=function(){t.props.faceCognitionStore.getFaceMatchConfidence()},t}return T(t,e),t.prototype.render=function(){var e=this,t=this.props.faceCognitionStore,n=t.isLoading,a=t.matchConfidence,r=t.photo1,s=t.photo2,u=n?v.a.createElement(f.a,{size:"large"}):v.a.createElement("div",null,v.a.createElement(q,null,this.formatPercentage(a)),v.a.createElement(F,null,"match confidence"),v.a.createElement("div",null,v.a.createElement(l.a,{onClick:this.getMatchConfidence},"Update")));return v.a.createElement(v.a.Fragment,null,v.a.createElement(c.a,null,v.a.createElement(i.a,{span:12},v.a.createElement(G,null,v.a.createElement(x.a,{audio:!1,height:360,ref:function(t){return e.webcam=t},screenshotFormat:"image/png",width:480}))),v.a.createElement(i.a,{span:12},r.faceRectangle&&v.a.createElement(N,{style:{height:r.faceRectangle.height,left:r.faceRectangle.left,top:r.faceRectangle.top,width:r.faceRectangle.width}}),v.a.createElement(I,{src:r.data}),v.a.createElement(D,null,v.a.createElement(l.a,{onClick:this.capture(1)},v.a.createElement(o.a,{type:"pushpin"}))))),v.a.createElement(c.a,null,v.a.createElement(i.a,{span:12},v.a.createElement(L,null,u)),v.a.createElement(i.a,{span:12},s.faceRectangle&&v.a.createElement(N,{style:{height:s.faceRectangle.height,left:s.faceRectangle.left,top:s.faceRectangle.top,width:s.faceRectangle.width}}),v.a.createElement(I,{src:s.data}),v.a.createElement(D,null,v.a.createElement(l.a,{onClick:this.capture(2)},v.a.createElement(o.a,{type:"pushpin"}))))))},t.prototype.formatPercentage=function(e){return h()(e)?(100*e).toFixed(0)+"%":"TBD"},P([m.d],t.prototype,"capture",void 0),t=P([g.a],t)}(v.a.Component);t.default=W}}]);